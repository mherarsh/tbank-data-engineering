<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB: –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å NoSQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö</title>
    <style>
        @media print {
            body { margin: 0; }
            .page-break { page-break-before: always; }
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }
        
        h1 {
            color: #2c5aa0;
            border-bottom: 3px solid #2c5aa0;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        h2 {
            color: #2c5aa0;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        
        h3 {
            color: #495057;
            margin-top: 25px;
        }
        
        h4 {
            color: #6c757d;
            margin-top: 20px;
        }
        
        .emoji {
            font-size: 1.2em;
            margin-right: 5px;
        }
        
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            overflow-x: auto;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', Consolas, monospace;
            font-size: 13px;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .highlight h4 {
            margin-top: 0;
            color: #856404;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            text-align: left;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .toc {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
        
        ul {
            padding-left: 20px;
        }
        
        li {
            margin: 5px 0;
        }
        
        strong {
            color: #495057;
        }
    </style>
</head>
<body>
    <h1><span class="emoji">üìö</span>MongoDB: –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å NoSQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö</h1>

    <div class="toc">
        <h2><span class="emoji">üìã</span>–ü–ª–∞–Ω —Å–µ–º–∏–Ω–∞—Ä–∞</h2>
        
        <h3><strong>–ë–ª–æ–∫ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å MongoDB</strong></h3>
        <ul>
            <li>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB</li>
            <li>–û–±–∑–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ MongoDB Compass / NoSQL Booster</li>
            <li>–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</li>
            <li>–ò–º–ø–æ—Ä—Ç —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö</li>
        </ul>

        <h3><strong>–ë–ª–æ–∫ 2: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏</strong></h3>
        <ul>
            <li><strong>Create</strong> - –≤—Å—Ç–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
            <li><strong>Read</strong> - –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è</li>
            <li><strong>Update</strong> - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
            <li><strong>Delete</strong> - —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
        </ul>

        <h3><strong>–ë–ª–æ–∫ 3: –ò–Ω–¥–µ–∫—Å—ã –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</strong></h3>
        <ul>
            <li>–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤</li>
            <li>–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li>
            <li>–ü—Ä–æ—Å—Ç—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</li>
        </ul>
    </div>

    <h2><span class="emoji">üé¨</span>–î–∞—Ç–∞—Å–µ—Ç: –§–∏–ª—å–º—ã MongoDB Sample</h2>

    <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> MongoDB Sample Mflix Dataset<br>
    <strong>–°—Å—ã–ª–∫–∞:</strong> https://raw.githubusercontent.com/neelabalan/mongodb-sample-dataset/main/sample_mflix/movies.json</p>

    <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ñ–∏–ª—å–º–∞:</h3>
    <pre><code>{
  "_id": ObjectId("573a1390f29313caabcd4135"),
  "title": "Inception",
  "year": 2010,
  "genres": ["Sci-Fi", "Thriller"],
  "runtime": 148,
  "cast": ["Leonardo DiCaprio", "Marion Cotillard"],
  "directors": ["Christopher Nolan"],
  "imdb": {
    "rating": 8.8,
    "votes": 2000000
  },
  "tomatoes": {
    "viewer": {
      "rating": 4.2,
      "numReviews": 150000
    }
  },
  "plot": "Dom Cobb is a skilled thief...",
  "countries": ["USA", "UK"],
  "released": ISODate("2010-07-16T00:00:00.000Z")
}</code></pre>

    <div class="page-break"></div>

    <h1><span class="emoji">üöÄ</span>–ë–õ–û–ö 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h1>

    <h2>–®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB</h2>

    <h3>–í–∞—Ä–∏–∞–Ω—Ç A: MongoDB –≤ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</h3>
    <pre><code># –ó–∞–ø—É—Å–∫ MongoDB –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker run -d \
  --name mongodb \
  -p 27017:27017 \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=secret \
  mongo:latest

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker ps

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ mongo shell
docker exec -it mongodb mongosh -u admin -p secret</code></pre>

    <p><strong>–°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</strong> <code>mongodb://admin:secret@localhost:27017</code></p>

    <h3>–í–∞—Ä–∏–∞–Ω—Ç B: MongoDB Compass</h3>
    <ol>
        <li>–û—Ç–∫—Ä—ã—Ç—å MongoDB Compass</li>
        <li>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É: <code>mongodb://admin:secret@localhost:27017</code></li>
        <li>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: <code>movies_db</code></li>
    </ol>

    <h3>–í–∞—Ä–∏–∞–Ω—Ç C: NoSQL Booster / MongoDB Compose</h3>
    <ol>
        <li>–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>
        <li>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: <code>mongodb://admin:secret@localhost:27017</code></li>
        <li>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É</li>
    </ol>

    <h2>–®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>
    <pre><code>// –í MongoDB Shell –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
use movies_db</code></pre>

    <h2>–®–∞–≥ 3: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>

    <h3>–ß–µ—Ä–µ–∑ Compass:</h3>
    <ol>
        <li>Collections ‚Üí Create Collection ‚Üí <code>movies</code></li>
        <li>Import Data ‚Üí Select File ‚Üí movies.json</li>
        <li>File Type: JSON</li>
    </ol>

    <h3>–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:</h3>
    <pre><code>mongoimport --db movies_db --collection movies --file movies.json --jsonArray</code></pre>

    <h3>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞:</h3>
    <pre><code>db.movies.countDocuments()

db.movies.findOne()</code></pre>

    <div class="page-break"></div>

    <h1><span class="emoji">üìù</span>–ë–õ–û–ö 2: CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏</h1>

    <h2>2.1 CREATE - –í—Å—Ç–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>

    <h3>–í—Å—Ç–∞–≤–∫–∞ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
    <pre><code>db.movies.insertOne({
  "title": "–ú–æ–π –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º",
  "year": 2024,
  "genres": ["–î—Ä–∞–º–∞", "–ö–æ–º–µ–¥–∏—è"],
  "directors": ["–°—Ç—É–¥–µ–Ω—Ç –ü–µ—Ä–≤—ã–π"],
  "cast": ["–ê–∫—Ç–µ—Ä –ê", "–ê–∫—Ç–µ—Ä –ë"],
  "runtime": 120,
  "imdb": {
    "rating": 9.5,
    "votes": 1000
  },
  "plot": "–ò—Å—Ç–æ—Ä–∏—è –æ —Ç–æ–º, –∫–∞–∫ —Å—Ç—É–¥–µ–Ω—Ç –∏–∑—É—á–∞–ª MongoDB"
})</code></pre>

    <h3>–í—Å—Ç–∞–≤–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
    <pre><code>db.movies.insertMany([
  {
    "title": "MongoDB: –§–∏–ª—å–º",
    "year": 2024,
    "genres": ["–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π"],
    "runtime": 90,
    "imdb": {"rating": 8.0, "votes": 500}
  },
  {
    "title": "NoSQL –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è",
    "year": 2024,
    "genres": ["–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"],
    "runtime": 105,
    "imdb": {"rating": 7.5, "votes": 300}
  }
])</code></pre>

    <div class="highlight">
        <h4><span class="emoji">üí°</span>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ 1</h4>
        <p><strong>–°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Å–≤–æ–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ —Ñ–∏–ª—å–º–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏</strong></p>
    </div>

    <h2>2.2 READ - –ß—Ç–µ–Ω–∏–µ –∏ –ø–æ–∏—Å–∫</h2>

    <h3>–ë–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã</h3>

    <h4>–ù–∞–π—Ç–∏ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</h4>
    <pre><code>db.movies.find()</code></pre>

    <h4>–ù–∞–π—Ç–∏ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç</h4>
    <pre><code>db.movies.findOne()</code></pre>

    <h4>–ü–æ–∏—Å–∫ —Å —É—Å–ª–æ–≤–∏–µ–º</h4>
    <pre><code>// –§–∏–ª—å–º—ã 2010 –≥–æ–¥–∞
db.movies.find({"year": 2010})

// –§–∏–ª—å–º—ã —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º
db.movies.find({"imdb.rating": {"$gte": 8.0}})</code></pre>

    <h3>–û–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
    <pre><code>// –†–∞–≤–µ–Ω—Å—Ç–≤–æ
db.movies.find({"year": 2010})

// –ë–æ–ª—å—à–µ —á–µ–º
db.movies.find({"year": {"$gt": 2000}})

// –ë–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ
db.movies.find({"imdb.rating": {"$gte": 8.0}})

// –ú–µ–Ω—å—à–µ —á–µ–º
db.movies.find({"runtime": {"$lt": 90}})

// –ù–µ —Ä–∞–≤–Ω–æ
db.movies.find({"year": {"$ne": 2010}})

// –í —Å–ø–∏—Å–∫–µ –∑–Ω–∞—á–µ–Ω–∏–π
db.movies.find({"year": {"$in": [2010, 2015, 2020]}})

// –ù–µ –≤ —Å–ø–∏—Å–∫–µ
db.movies.find({"year": {"$nin": [1990, 1995]}})</code></pre>

    <h3>–†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏</h3>
    <pre><code>// –§–∏–ª—å–º—ã —Å –∂–∞–Ω—Ä–æ–º "Drama"
db.movies.find({"genres": "Drama"})

// –§–∏–ª—å–º—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∂–∞–Ω—Ä–∞–º–∏
db.movies.find({"genres": {"$all": ["Drama", "Romance"]}})

// –§–∏–ª—å–º—ã —Å Leonardo DiCaprio
db.movies.find({"cast": "Leonardo DiCaprio"})</code></pre>

    <h3>–†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏ (regex)</h3>
    <pre><code>// –§–∏–ª—å–º—ã, –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å "Love"
db.movies.find({"title": {"$regex": "Love", "$options": "i"}})

// –§–∏–ª—å–º—ã, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "The"
db.movies.find({"title": {"$regex": "^The"}})</code></pre>

    <h3>–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã</h3>
    <pre><code>// –ò (AND)
db.movies.find({
  "$and": [
    {"year": {"$gte": 2000}},
    {"imdb.rating": {"$gte": 7.0}}
  ]
})

// –ò–õ–ò (OR)
db.movies.find({
  "$or": [
    {"genres": "Comedy"},
    {"genres": "Romance"}
  ]
})</code></pre>

    <h3>–ü—Ä–æ–µ–∫—Ü–∏—è (–≤—ã–±–æ—Ä –ø–æ–ª–µ–π)</h3>
    <pre><code>// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –≥–æ–¥
db.movies.find({}, {"title": 1, "year": 1, "_id": 0})

// –ò—Å–∫–ª—é—á–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è
db.movies.find({}, {"plot": 0, "fullplot": 0})</code></pre>

    <h3>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</h3>
    <pre><code>// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≥–æ–¥—É (—É–±—ã–≤–∞–Ω–∏–µ)
db.movies.find().sort({"year": -1})

// –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç 5 –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
db.movies.find().limit(5)

// –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–µ 10 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
db.movies.find().skip(10)

// –ö–æ–º–±–∏–Ω–∞—Ü–∏—è
db.movies.find({"imdb.rating": {"$gte": 8.0}})
         .sort({"imdb.rating": -1})
         .limit(10)</code></pre>

    <div class="highlight">
        <h4><span class="emoji">üí°</span>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è</h4>
        <ol>
            <li><strong>–ù–∞–π–¥–∏—Ç–µ –≤—Å–µ —Ñ–∏–ª—å–º—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º IMDB –≤—ã—à–µ 8.5</strong></li>
            <li><strong>–ù–∞–π–¥–∏—Ç–µ –∫–æ–º–µ–¥–∏–∏, –≤—ã–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ 2000 –≥–æ–¥–∞</strong></li>
            <li><strong>–ù–∞–π–¥–∏—Ç–µ —Ñ–∏–ª—å–º—ã —Å Tom Hanks –≤ –∞–∫—Ç–µ—Ä—Å–∫–æ–º —Å–æ—Å—Ç–∞–≤–µ</strong></li>
            <li><strong>–ù–∞–π–¥–∏—Ç–µ —Ç–æ–ø-10 —Ñ–∏–ª—å–º–æ–≤ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É IMDB</strong></li>
            <li><strong>–ù–∞–π–¥–∏—Ç–µ —Ñ–∏–ª—å–º—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –æ—Ç 90 –¥–æ 120 –º–∏–Ω—É—Ç</strong></li>
        </ol>
    </div>

    <div class="page-break"></div>

    <h2>2.3 UPDATE - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>

    <h3><span class="emoji">üìã</span>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</h3>

    <p><strong>MongoDB –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:</strong></p>
    <pre><code>// –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ updateOne()
{
  "acknowledged": true,
  "matchedCount": 1,    // –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  "modifiedCount": 1,   // –ò–∑–º–µ–Ω–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  "upsertedId": null    // ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–µ—Å–ª–∏ upsert)
}</code></pre>

    <div class="warning">
        <strong>–í–∞–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π!</strong>
    </div>

    <h3>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
    <pre><code>// –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–µ–∫—É—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥
db.movies.findOne({"title": "Inception"}, {"title": 1, "imdb.rating": 1})

// –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞
db.movies.update(
  {"title": "Inception"},
  {"$set": {"imdb.rating": 9.0}}
)

// –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "Inception"}, {"title": 1, "imdb.rating": 1})</code></pre>

    <h3>–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</h3>

    <h4>$set - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</h4>
    <pre><code>// –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
db.movies.findOne({"title": "Titanic"}, {"title": 1, "imdb.rating": 1, "runtime": 1})

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
db.movies.update(
  {"title": "Titanic"},
  {"$set": {
    "imdb.rating": 7.8,
    "runtime": 195,
    "updated": new Date()
  }}
)

// –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "Titanic"}, {"title": 1, "imdb.rating": 1, "runtime": 1, "updated": 1})</code></pre>

    <h4>$inc - —É–≤–µ–ª–∏—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</h4>
    <pre><code>// –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
db.movies.findOne({"title": "The Dark Knight"}, {"title": 1, "imdb.votes": 1})

// –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤ –Ω–∞ 100
db.movies.update(
  {"title": "The Dark Knight"},
  {"$inc": {"imdb.votes": 100}}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "The Dark Knight"}, {"title": 1, "imdb.votes": 1})</code></pre>

    <h4>$push - –¥–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤</h4>
    <pre><code>// –°–Ω–∞—á–∞–ª–∞ —Å–º–æ—Ç—Ä–∏–º —Ç–µ–∫—É—â–∏–µ –∂–∞–Ω—Ä—ã
db.movies.findOne({"title": "Interstellar"}, {"title": 1, "genres": 1})

// –î–æ–±–∞–≤–∏—Ç—å –∂–∞–Ω—Ä
db.movies.update(
  {"title": "Interstellar"},
  {"$push": {"genres": "Epic"}}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∂–∞–Ω—Ä—ã
db.movies.findOne({"title": "Interstellar"}, {"title": 1, "genres": 1})

// –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ cast
db.movies.update(
  {"title": "Avatar"},
  {"$push": {"cast": {"$each": ["–ù–æ–≤—ã–π –ê–∫—Ç–µ—Ä 1", "–ù–æ–≤—ã–π –ê–∫—Ç–µ—Ä 2"]}}}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π cast
db.movies.findOne({"title": "Avatar"}, {"title": 1, "cast": 1})</code></pre>

    <h4>$pull - —É–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –º–∞—Å—Å–∏–≤–∞</h4>
    <pre><code>// –ù–∞–π–¥–µ–º —Ñ–∏–ª—å–º —Å –∂–∞–Ω—Ä–æ–º Horror
db.movies.findOne({"genres": "Horror"}, {"title": 1, "genres": 1})

// –£–¥–∞–ª–∏—Ç—å –∂–∞–Ω—Ä Horror –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
db.movies.update(
  {"title": "–ù–ê–ó–í–ê–ù–ò–ï_–§–ò–õ–¨–ú–ê"},
  {"$pull": {"genres": "Horror"}}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "–ù–ê–ó–í–ê–ù–ò–ï_–§–ò–õ–¨–ú–ê"}, {"title": 1, "genres": 1})</code></pre>

    <h4>$addToSet - –¥–æ–±–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤</h4>
    <pre><code>// –î–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
db.movies.findOne({"genres": "Action"}, {"title": 1, "genres": 1})

// –î–æ–±–∞–≤–ª—è–µ–º –∂–∞–Ω—Ä (–Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å)
db.movies.update(
  {"genres": "Action"},
  {"$addToSet": {"genres": "Thriller"}}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "–ù–ê–ó–í–ê–ù–ò–ï_–ù–ê–ô–î–ï–ù–ù–û–ì–û_–§–ò–õ–¨–ú–ê"}, {"title": 1, "genres": 1})</code></pre>

    <h3>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
    <pre><code>// –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å–º–æ–≤ 1990 –≥–æ–¥–∞ –±–µ–∑ –ø–æ–ª—è "decade"
db.movies.countDocuments({"year": 1990, "decade": {"$exists": false}})

// –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã 1990 –≥–æ–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä multi: true)
db.movies.update(
  {"year": 1990},
  {"$set": {"decade": "90s"}},
  {"multi": true}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç - —Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±—ã–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ
db.movies.countDocuments({"year": 1990, "decade": "90s"})

// –ü–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –æ–¥–∏–Ω –∏–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
db.movies.findOne({"year": 1990}, {"title": 1, "year": 1, "decade": 1})</code></pre>

    <h3>Upsert - –≤—Å—Ç–∞–≤–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</h3>
    <pre><code>// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∏–ª—å–º
db.movies.findOne({"title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º 2024"})

// Upsert –æ–ø–µ—Ä–∞—Ü–∏—è
db.movies.update(
  {"title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º 2024"},
  {"$set": {
    "year": 2024,
    "genres": ["Sci-Fi"],
    "imdb": {"rating": 7.0}
  }},
  {"upsert": true}  // –°–æ–∑–¥–∞—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω
db.movies.findOne({"title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º 2024"})

// –ü–æ–ø—Ä–æ–±—É–µ–º upsert –µ—â–µ —Ä–∞–∑ (–¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
db.movies.update(
  {"title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º 2024"},
  {"$set": {"imdb.rating": 7.5}},
  {"upsert": true}
)

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
db.movies.findOne({"title": "–ù–æ–≤—ã–π —Ñ–∏–ª—å–º 2024"}, {"title": 1, "imdb.rating": 1})</code></pre>

    <div class="highlight">
        <h4><span class="emoji">üí°</span>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è</h4>
        
        <p><strong>1. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥ —Å–≤–æ–µ–≥–æ –ª—é–±–∏–º–æ–≥–æ —Ñ–∏–ª—å–º–∞</strong></p>
        <pre><code>// –ù–∞–π–¥–∏—Ç–µ —Ñ–∏–ª—å–º
db.movies.findOne({"title": "–ù–ê–ó–í–ê–ù–ò–ï"}, {"title": 1, "imdb.rating": 1})

// –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–π—Ç–∏–Ω–≥
db.movies.update({"title": "–ù–ê–ó–í–ê–ù–ò–ï"}, {"$set": {"imdb.rating": 9.5}})

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"title": "–ù–ê–ó–í–ê–ù–ò–ï"}, {"title": 1, "imdb.rating": 1})</code></pre>

        <p><strong>2. –î–æ–±–∞–≤—å—Ç–µ –∂–∞–Ω—Ä "Classic" –≤—Å–µ–º —Ñ–∏–ª—å–º–∞–º –¥–æ 1980 –≥–æ–¥–∞</strong></p>
        <pre><code>// –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
db.movies.countDocuments({"year": {"$lt": 1980}})

// –û–±–Ω–æ–≤–∏–º (–Ω–µ –∑–∞–±—ã–≤–∞–µ–º multi: true –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
db.movies.update(
  {"year": {"$lt": 1980}}, 
  {"$addToSet": {"genres": "Classic"}},
  {"multi": true}
)

// –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.findOne({"year": {"$lt": 1980}}, {"title": 1, "year": 1, "genres": 1})</code></pre>

        <p><strong>3. –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤ –Ω–∞ 1000 –¥–ª—è —Ñ–∏–ª—å–º–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –≤—ã—à–µ 9.0</strong></p>
        <pre><code>// –ù–∞–π–¥–µ–º —Ñ–∏–ª—å–º—ã —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º
db.movies.find({"imdb.rating": {"$gt": 9.0}}, {"title": 1, "imdb.rating": 1, "imdb.votes": 1})

// –û–±–Ω–æ–≤–∏–º –≥–æ–ª–æ—Å–∞
db.movies.update(
  {"imdb.rating": {"$gt": 9.0}}, 
  {"$inc": {"imdb.votes": 1000}},
  {"multi": true}
)

// –ü—Ä–æ–≤–µ—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
db.movies.find({"imdb.rating": {"$gt": 9.0}}, {"title": 1, "imdb.rating": 1, "imdb.votes": 1})</code></pre>

        <p><strong>4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ upsert –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ñ–∏–ª—å–º–∞</strong></p>
        <pre><code>// –ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ñ–∏–ª—å–º–∞ –Ω–µ—Ç
db.movies.findOne({"title": "–ú–æ–π —Ñ–∏–ª—å–º 2024"})

// –°–æ–∑–¥–∞–¥–∏–º —á–µ—Ä–µ–∑ upsert
db.movies.update(
  {"title": "–ú–æ–π —Ñ–∏–ª—å–º 2024"},
  {"$set": {"year": 2024, "genres": ["Drama"], "imdb": {"rating": 8.5}}},
  {"upsert": true}
)

// –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —Å–æ–∑–¥–∞–ª—Å—è
db.movies.findOne({"title": "–ú–æ–π —Ñ–∏–ª—å–º 2024"})</code></pre>
    </div>

    <div class="page-break"></div>

    <h2>2.4 DELETE - –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>

    <h3>–£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
    <pre><code>// –£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å–º –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
db.movies.deleteOne({"title": "Bad Movie"})</code></pre>

    <h3>–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
    <pre><code>// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º –Ω–∏–∂–µ 2.0
db.movies.deleteMany({"imdb.rating": {"$lt": 2.0}})

// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ñ–∏–ª—å–º—ã –±–µ–∑ —Ä–µ–π—Ç–∏–Ω–≥–∞
db.movies.deleteMany({"imdb.rating": {"$exists": false}})</code></pre>

    <h3>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</h3>
    <pre><code>// –í–ù–ò–ú–ê–ù–ò–ï: –£–¥–∞–ª–∏—Ç –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã!
db.movies.deleteMany({})

// –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
db.movies.drop()</code></pre>

    <div class="highlight">
        <h4><span class="emoji">üí°</span>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ</h4>
        <p><strong>–£–¥–∞–ª–∏—Ç–µ —Ñ–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–∑–¥–∞–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</strong></p>
    </div>

    <div class="page-break"></div>

    <h1><span class="emoji">üìä</span>–ë–õ–û–ö 3: –ò–Ω–¥–µ–∫—Å—ã –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</h1>

    <h2>3.1 –†–∞–±–æ—Ç–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏</h2>

    <h3>–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤</h3>
    <pre><code>// –ü—Ä–æ—Å—Ç–æ–π –∏–Ω–¥–µ–∫—Å –ø–æ –≥–æ–¥—É –≤—ã–ø—É—Å–∫–∞
db.movies.createIndex({"year": 1})

// –ò–Ω–¥–µ–∫—Å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (—É–±—ã–≤–∞–Ω–∏–µ)
db.movies.createIndex({"imdb.rating": -1})

// –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å
db.movies.createIndex({"year": 1, "imdb.rating": -1})

// –ò–Ω–¥–µ–∫—Å –ø–æ —Ç–µ–∫—Å—Ç—É (–¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö)
db.movies.createIndex({"title": "text", "plot": "text"})</code></pre>

    <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–æ–≤</h3>
    <pre><code>// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã –∫–æ–ª–ª–µ–∫—Ü–∏–∏
db.movies.getIndexes()</code></pre>

    <h3>–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å explain()</h3>
    <pre><code>// –ó–∞–ø—Ä–æ—Å –ë–ï–ó –∏–Ω–¥–µ–∫—Å–∞ - —Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
db.movies.find({"year": 2010}).explain("executionStats")

// –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–µ–∫—Å –ø–æ –≥–æ–¥—É
db.movies.createIndex({"year": 1})

// –¢–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –° –∏–Ω–¥–µ–∫—Å–æ–º
db.movies.find({"year": 2010}).explain("executionStats")</code></pre>

    <h3><span class="emoji">üìä</span>–ö–∞–∫ —á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã explain()</h3>

    <h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:</h4>
    <table>
        <tr>
            <th>–ü–æ–ª–µ</th>
            <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
        </tr>
        <tr>
            <td><code>stage</code></td>
            <td>–≠—Ç–∞–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (<code>COLLSCAN</code> - —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, <code>IXSCAN</code> - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞)</td>
        </tr>
        <tr>
            <td><code>filter</code></td>
            <td>–£—Å–ª–æ–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏–Ω–¥–µ–∫—Å—ã</td>
        </tr>
        <tr>
            <td><code>docsExamined</code></td>
            <td>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</td>
        </tr>
        <tr>
            <td><code>nReturned</code></td>
            <td>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–º</td>
        </tr>
        <tr>
            <td><code>totalKeysExamined</code></td>
            <td>–°–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ (>0 –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)</td>
        </tr>
        <tr>
            <td><code>executionTimeMillis</code></td>
            <td>–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö</td>
        </tr>
    </table>

    <h4>–ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞:</h4>
    <pre><code>// üîç –ü–ª–æ—Ö–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞):
{
  "stage": "COLLSCAN",           // ‚ùå –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
  "docsExamined": 23539,         // ‚ùå –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ –º–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  "nReturned": 279,              // ‚úÖ –í–µ—Ä–Ω—É–ª–∏ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ
  "executionTimeMillis": 25      // ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ
}

// üöÄ –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å –∏–Ω–¥–µ–∫—Å–æ–º):
{
  "stage": "IXSCAN",             // ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞
  "docsExamined": 279,           // ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ –º–∏–Ω–∏–º—É–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
  "nReturned": 279,              // ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ 1:1
  "totalKeysExamined": 279,      // ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –∏–Ω–¥–µ–∫—Å
  "executionTimeMillis": 2       // ‚úÖ –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ
}</code></pre>

    <h3>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏–∑–∞</h3>
    <pre><code>// 1. –ó–∞–ø—Ä–æ—Å –ø–æ –≥–æ–¥—É (–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å)
db.movies.find({"year": 2010}).explain("executionStats")

// 2. –ó–∞–ø—Ä–æ—Å –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É (–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å)
db.movies.find({"imdb.rating": {"$gte": 8.0}}).explain("executionStats")

// 3. –°–æ—Å—Ç–∞–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å)
db.movies.find({"year": 2010, "imdb.rating": {"$gte": 7.0}}).explain("executionStats")

// 4. –ó–∞–ø—Ä–æ—Å –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å COLLSCAN)
db.movies.find({"runtime": {"$gt": 120}}).explain("executionStats")</code></pre>

    <h3>–ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –Ω–∞—à–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞:</h3>
    <pre><code>// –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
db.movies.createIndex({"year": 1})
db.movies.createIndex({"imdb.rating": -1})
db.movies.createIndex({"genres": 1})
db.movies.createIndex({"year": 1, "imdb.rating": -1})</code></pre>

    <h2>3.2 –ü—Ä–æ—Å—Ç—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</h2>

    <h3>–ü–æ–¥—Å—á–µ—Ç —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∂–∞–Ω—Ä–∞–º</h3>
    <pre><code>// –ü—Ä–æ—Å—Ç–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞: —Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å–º–æ–≤ –∫–∞–∂–¥–æ–≥–æ –∂–∞–Ω—Ä–∞
db.movies.aggregate([
  {"$unwind": "$genres"},           // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –∂–∞–Ω—Ä–æ–≤
  {"$group": {                      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –∂–∞–Ω—Ä–∞–º
    "_id": "$genres",
    "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ": {"$sum": 1}       // –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  }},
  {"$sort": {"–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ": -1}},    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é
  {"$limit": 5}                     // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-5
])</code></pre>

    <h3>–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ –≥–æ–¥–∞–º</h3>
    <pre><code>// –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ IMDB –ø–æ –≥–æ–¥–∞–º
db.movies.aggregate([
  {"$group": {
    "_id": "$year",                    // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –≥–æ–¥–∞–º
    "—Å—Ä–µ–¥–Ω–∏–π_—Ä–µ–π—Ç–∏–Ω–≥": {"$avg": "$imdb.rating"},
    "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Ñ–∏–ª—å–º–æ–≤": {"$sum": 1}
  }},
  {"$sort": {"_id": -1}},            // –û—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º –≥–æ–¥–∞–º
  {"$limit": 10}
])</code></pre>

    <h3>–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∞–∫—Ç–µ—Ä—ã</h3>
    <pre><code>// –ü–æ–¥—Å—á–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å–º–æ–≤ —É –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–µ—Ä–∞
db.movies.aggregate([
  {"$unwind": "$cast"},              // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –∞–∫—Ç–µ—Ä–æ–≤
  {"$group": {
    "_id": "$cast",                  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –∞–∫—Ç–µ—Ä–∞–º
    "—Ñ–∏–ª—å–º–æ–≤": {"$sum": 1}
  }},
  {"$sort": {"—Ñ–∏–ª—å–º–æ–≤": -1}},        // –ü–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
  {"$limit": 10}
])</code></pre>

    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h3>
    <pre><code>// –ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å–º–æ–≤
db.movies.aggregate([
  {"$group": {
    "_id": null,                     // –û–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ –¥–ª—è –≤—Å–µ—Ö
    "—Å—Ä–µ–¥–Ω—è—è_–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å": {"$avg": "$runtime"},
    "–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è": {"$max": "$runtime"},
    "–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è": {"$min": "$runtime"},
    "–≤—Å–µ–≥–æ_—Ñ–∏–ª—å–º–æ–≤": {"$sum": 1}
  }}
])</code></pre>

    <div class="page-break"></div>

    <h1><span class="emoji">üè†</span>–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ</h1>

    <h2>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö</h2>

    <p>–í–∞—à–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö <code>shop</code> –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ BSON (Binary JSON).</p>

    <p><strong>–ö–æ–ª–ª–µ–∫—Ü–∏—è <code>products</code> ‚Äî –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤:</strong></p>
    <pre><code>{
  name: "iPhone 15",
  price: 80000,
  quantity: 10,
  description: "–ù–æ–≤—ã–π iPhone —Å —á–∏–ø–æ–º A17 Pro"
}</code></pre>

    <p>–ö–∞–∂–¥—ã–π —Ç–æ–≤–∞—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º —Å–æ –≤—Å–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –ü–æ–ª–µ <code>name</code> —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, <code>price</code> ‚Äî —Ü–µ–Ω—É –≤ —Ä—É–±–ª—è—Ö, <code>quantity</code> ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ, –∞ <code>description</code> ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. MongoDB –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ <code>_id</code> –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.</p>

    <p><strong>–ö–æ–ª–ª–µ–∫—Ü–∏—è <code>orders</code> ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤:</strong></p>
    <pre><code>{
  customer_email: "ivan@mail.ru",
  product_name: "iPhone 15",
  quantity: 2,
  total_price: 160000,
  order_date: new Date("2024-12-15")
}</code></pre>

    <p>–ö–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ —Å —Ç–æ–≤–∞—Ä–æ–º —á–µ—Ä–µ–∑ email –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞. –ü–æ–ª–µ <code>quantity</code> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞ –≤ –∑–∞–∫–∞–∑–µ, <code>total_price</code> ‚Äî –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏, –∞ <code>order_date</code> ‚Äî –¥–∞—Ç—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞. –¢–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –ø—Ä–æ–¥–∞–∂–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏.</p>

    <h2>–ó–∞–¥–∞–Ω–∏—è</h2>

    <div class="info">
        <h3>1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ.</h3>
    </div>

    <div class="info">
        <h3>2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:</h3>
        <ul>
            <li>–ù–∞–π—Ç–∏ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –¥–æ—Ä–æ–∂–µ 50000 —Ä—É–±–ª–µ–π</li>
            <li>–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é</li>
            <li>–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º 0</li>
        </ul>
    </div>

    <div class="info">
        <h3>3. –ù–∞–ø–∏—à–∏—Ç–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏:</h3>
        <ul>
            <li>–ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</li>
            <li>–ù–∞–π–¥–∏—Ç–µ —Ç–æ–ø-3 —Å–∞–º—ã—Ö –¥–æ—Ä–æ–≥–∏—Ö —Ç–æ–≤–∞—Ä–∞ —Å –∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</li>
            <li>–ü–æ—Å—á–∏—Ç–∞–π—Ç–µ –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–µ (—Ü–µ–Ω–∞ √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)</li>
            <li>–ù–∞–π–¥–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –≥–¥–µ —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤ –±–æ–ª—å—à–µ 30000 —Ä—É–±–ª–µ–π</li>
            <li>–ü–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤</li>
            <li>–ü–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ –ø–æ customer_email –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É–±—ã–≤–∞–Ω–∏—é –æ–±—â–µ–π —Å—É–º–º—ã</li>
            <li>–ù–∞–π—Ç–∏ —Ç–æ–ø-3 —Å–∞–º—ã—Ö –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</li>
        </ul>
    </div>
</body>
</html>