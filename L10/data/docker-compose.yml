version: '3.8'

services:
  cassandra_db:
    image: cassandra:latest
    container_name: cassandra_db
    hostname: cassandra_db
    environment:
      - SEEDS=cassandra_db
      - START_RPC=false
      - CLUSTER_NAME=dse51_cluster
      - DC=DC1
      - RACK=RAC1
      - NUM_TOKENS=256
      - MAX_HEAP_SIZE=1G
      - HEAP_NEWSIZE=200M
      - CASSANDRA_ENDPOINT_SNITCH=GossipingPropertyFileSnitch
    expose:
      - 9042
    ports:
      - "9042:9042"
    ulimits:
      memlock: -1
      nproc: 32768
      nofile: 10000
    networks:
      - sri-net

networks:
  sri-net:
    driver: bridge
